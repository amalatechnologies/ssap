(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{699:function(t,e,n){"use strict";n.r(e);var a=n(552),o=n(236),r=n(58),i=n(596),c=n(573),l=n(570),s=n(562),u=n(554),d=n(132),m=n(678),p=n(589),f=n(153),v=n(238),g=n(152),_=n(239),h=n(240),b=n(14),x=n(244),k=n(572),w=n(565),C=n(609),$=n(581),y=n(677),D=(n(10),n(70),n(38),n(6)),F=(n(30),n(33),{data:function(){return{documents:null,dialog:!1,loading:!1,isSelecting:!1,selectedFile:null,valid:!0,rules:[function(t){return!t||t.size<4e6||"File size should be less than 2 MB!"},function(t){return!!t||"Document is required"}],document:{name:null,description:null},defaultdocument:{name:null,description:null}}},created:function(){this.getloanaccountdocuments()},methods:{getloanaccountdocuments:function(){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$api.$get("/loans/".concat(t.$route.params.id,"/documents")).then((function(e){t.loading=!1,t.documents=e})).catch((function(t){}));case 3:case"end":return e.stop()}}),e)})))()},deleteloanaccountdocument:function(t){var e=this;return Object(D.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,e.$api.$delete("/loans/".concat(e.$route.params.id,"/").concat(t.id)).then((function(t){e.getloanaccountdocuments()})).catch((function(t){}));case 3:case"end":return n.stop()}}),n)})))()},uploadloanaccountdocument:function(){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=8;break}return t.loading=!0,(n=new FormData).append("file",t.selectedFile),n.append("name",t.document.name),n.append("description",t.document.description),e.next=8,t.$api.$post("/loans/".concat(t.$route.params.id,"/documents"),n).then((function(e){t.document=t.defaultdocument,t.$refs.fileupload.reset(),t.dialog=!1,t.getloanaccountdocuments()})).catch((function(t){}));case 8:case"end":return e.stop()}}),e)})))()},onFileChanged:function(t){null!==t&&(this.selectedFile=t)}}}),O=n(45),R=Object(O.a)(F,(function(){var t=this,e=t._self._c;return e(l.a,[e(v.a,{attrs:{subheader:"","two-line":""}},[e(C.a,[e(g.a,{staticClass:"mt-2"},[e(b.b,[e(b.d,[t._v(" LOAN DOCUMENTS ")])],1),t._v(" "),e(_.a,[t.loading?e(x.a,{attrs:{indeterminate:"",color:"grey lighten-1"}}):t._e()],1)],1)],1),t._v(" "),t._l(t.documents,(function(n){return e(o.a,{key:n.id,staticClass:"mt-2 pa-2",attrs:{elevation:"1"}},[e(g.a,[e(h.a,["image"===n.type.split("/")[0]?e(f.a,{staticClass:"primary",attrs:{dark:""}},[t._v("\n            mdi-image\n          ")]):e(f.a,{staticClass:"blue lighten-1",attrs:{dark:""}},[t._v(" mdi-file-document ")])],1),t._v(" "),e(b.b,[e(b.d,{domProps:{textContent:t._s(n.name)}}),t._v(" "),e(b.c,{domProps:{textContent:t._s(n.description)}})],1),t._v(" "),e(_.a,[e(a.a,{attrs:{fab:"",small:"",elevation:"1"},on:{click:function(e){return t.deleteloanaccountdocument(n)}}},[e(f.a,{attrs:{color:"red lighten-1"}},[t._v("mdi-delete")])],1)],1)],1)],1)})),t._v(" "),e(d.c,[e("div",{staticClass:"text-center"},[e(s.a,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(a.a,t._g(t._b({staticClass:"v-btn--example",attrs:{fab:"",large:"",color:"primary",fixed:"",bottom:"",right:"",elevation:"2"}},"v-btn",r,!1),o),[e(f.a,[t._v("mdi-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),e(o.a,[e(r.c,{staticClass:"text-h5 white--text primary darken-2"},[t._v("\n              Upload Loan Document\n            ")]),t._v(" "),e(p.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(r.b,{staticClass:"mt-3"},[e(k.a,[e(c.a,{attrs:{cols:"12",sm:"12"}},[e($.a,{attrs:{label:"Document Name",hint:"Document Name",outlined:"",rules:[function(t){return!!t||"Field is required"}]},model:{value:t.document.name,callback:function(e){t.$set(t.document,"name",e)},expression:"document.name"}})],1),t._v(" "),e(c.a,{attrs:{cols:"12",md:"12"}},[e(y.a,{attrs:{name:"input-7-1",label:"Description",outlined:"",hint:"Description",rules:[function(t){return!!t||"Field is required"}]},model:{value:t.document.description,callback:function(e){t.$set(t.document,"description",e)},expression:"document.description"}})],1),t._v(" "),e(c.a,[e(m.a,{ref:"fileupload",attrs:{chips:"",accept:"image/*, file/*, application/*",label:"Select Document",rules:t.rules},on:{change:function(e){return t.onFileChanged(e)}},scopedSlots:t._u([{key:"selection",fn:function(n){var a=n.text;return[e(i.a,{attrs:{small:"",label:"",color:"primary"}},[t._v("\n                          "+t._s(a)+"\n                        ")])]}}])})],1)],1)],1)],1),t._v(" "),e(u.a),t._v(" "),e(r.a,[e(w.a),t._v(" "),e(a.a,{attrs:{color:"warning",small:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancel ")]),t._v(" "),e(a.a,{attrs:{color:"primary",small:""},on:{click:function(e){return t.uploadloanaccountdocument()}}},[t._v("\n                Upload\n              ")])],1)],1)],1)],1)])],2)],1)}),[],!1,null,null,null);e.default=R.exports}}]);